.studio-layout{position:fixed;top:var(--header-h);bottom:0;left:0;right:0;display:grid;grid-template-columns:220px 1fr 300px;z-index:10}

.file-panel,.ai-panel{background:rgba(4,12,25,0.97);display:flex;flex-direction:column;overflow:hidden}
.file-panel{border-right:1px solid var(--border)}
.ai-panel{border-left:1px solid var(--border)}

.panel-header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--border);font-family:var(--fhud);font-size:9px;letter-spacing:0.18em;color:var(--cyan-d);background:rgba(0,212,255,0.02);flex-shrink:0}
.panel-actions{display:flex;gap:4px}
.icon-action{width:26px;height:26px;border:1px solid var(--border);border-radius:3px;background:transparent;color:var(--txt-dim);cursor:pointer;font-size:13px;display:flex;align-items:center;justify-content:center;transition:all 0.2s}
.icon-action:hover{border-color:var(--cyan);color:var(--cyan)}
.ai-model-tag{font-family:var(--fmono);font-size:8px;color:var(--amber);border:1px solid rgba(255,170,0,0.2);padding:2px 7px;border-radius:10px}

.file-tree{flex:1;overflow-y:auto;padding:6px 0}
.file-tree::-webkit-scrollbar{width:3px}
.file-tree::-webkit-scrollbar-thumb{background:var(--cyan-d)}
.tree-empty{padding:20px 14px;font-family:var(--fmono);font-size:11px;color:var(--txt-dim);line-height:1.8;text-align:center}

.tree-item{display:flex;align-items:center;gap:6px;padding:5px 10px;cursor:pointer;font-family:var(--fmono);font-size:12px;color:var(--txt);border-left:2px solid transparent;transition:all 0.15s;user-select:none}
.tree-item:hover{background:rgba(0,212,255,0.04);border-left-color:var(--cyan-d)}
.tree-item.active{background:rgba(0,212,255,0.08);border-left-color:var(--cyan);color:var(--cyan)}
.tree-item.folder{color:var(--amber)}
.delete-btn{margin-left:auto;opacity:0;background:none;border:none;color:var(--red);cursor:pointer;font-size:11px;padding:0 3px}
.tree-item:hover .delete-btn{opacity:0.6}
.tree-item:hover .delete-btn:hover{opacity:1}
.tree-children{padding-left:14px}

.editor-panel{display:flex;flex-direction:column;background:#1e1e1e;overflow:hidden}
.editor-toolbar{display:flex;align-items:center;justify-content:space-between;padding:6px 12px;background:#2d2d2d;border-bottom:1px solid #333;flex-shrink:0}
.current-file{font-family:var(--fmono);font-size:12px;color:#ccc}
.toolbar-actions{display:flex;gap:6px}
.tool-btn{padding:4px 12px;border:1px solid #444;border-radius:3px;background:#333;color:#ccc;font-family:var(--fmono);font-size:11px;cursor:pointer;transition:all 0.2s}
.tool-btn:hover{border-color:var(--cyan);color:var(--cyan)}
.tool-btn:disabled{opacity:0.4;cursor:not-allowed}
.monaco-container{flex:1;overflow:hidden}

.ai-output{flex:1;overflow-y:auto;padding:12px}
.ai-output::-webkit-scrollbar{width:3px}
.ai-output::-webkit-scrollbar-thumb{background:var(--cyan-d)}
.ai-welcome{font-family:var(--fbody);font-size:13px;color:var(--txt-dim);line-height:1.8}
.ai-welcome p{margin-bottom:8px}.ai-welcome ul{padding-left:16px}
.ai-welcome li{margin-bottom:4px;color:var(--txt)}

.ai-msg{margin-bottom:10px;padding:10px 12px;border-radius:4px;font-family:var(--fbody);font-size:14px;line-height:1.7;animation:fadeUp 0.25s ease forwards;opacity:0}
.ai-msg.jarvis{background:rgba(0,212,255,0.04);border-left:3px solid var(--cyan);color:var(--txt)}
.ai-msg.user{background:rgba(255,170,0,0.04);border-left:3px solid var(--amber);color:var(--txt-dim);font-size:12px}
.ai-msg strong{color:var(--cyan)}

.ai-input-area{padding:10px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:8px;flex-shrink:0}
.toggle-label{display:flex;align-items:center;gap:6px;font-family:var(--fmono);font-size:10px;color:var(--txt-dim);cursor:pointer}
.toggle-label input{accent-color:var(--cyan)}

.ai-prompt-input{width:100%;background:var(--input-bg);border:1px solid var(--border);border-radius:4px;color:var(--txt);font-family:var(--fbody);font-size:14px;padding:8px 10px;resize:none;outline:none;transition:border-color 0.2s}
.ai-prompt-input:focus{border-color:var(--cyan)}
.ai-prompt-input::placeholder{color:var(--txt-dim)}

.ai-btn-row{display:flex;gap:6px}
.btn-generate{flex:1;padding:8px;background:linear-gradient(135deg,var(--cyan-d),#005577);border:1px solid var(--cyan);border-radius:4px;color:#fff;font-family:var(--fhud);font-size:10px;font-weight:700;letter-spacing:0.1em;cursor:pointer;transition:all 0.2s;box-shadow:0 0 12px rgba(0,212,255,0.15)}
.btn-generate:hover{background:linear-gradient(135deg,var(--cyan),var(--cyan-d));box-shadow:0 0 20px rgba(0,212,255,0.3)}
.btn-generate:disabled{opacity:0.4;cursor:not-allowed}
.btn-apply{flex:1;padding:8px;background:linear-gradient(135deg,#006600,#004400);border:1px solid var(--green);border-radius:4px;color:var(--green);font-family:var(--fhud);font-size:10px;font-weight:700;letter-spacing:0.1em;cursor:pointer;transition:all 0.2s}
.btn-apply:hover{box-shadow:0 0 14px rgba(0,255,136,0.25)}
.btn-apply:disabled{opacity:0.3;cursor:not-allowed}

.gen-preview{border-top:1px solid var(--border);max-height:200px;display:flex;flex-direction:column;flex-shrink:0}
.gen-preview-header{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;font-family:var(--fhud);font-size:9px;letter-spacing:0.12em;color:var(--cyan-d);border-bottom:1px solid var(--border);flex-shrink:0}
.close-btn{background:none;border:none;color:var(--txt-dim);cursor:pointer;font-size:12px}
.close-btn:hover{color:var(--red)}
.gen-code{flex:1;overflow-y:auto;padding:8px 10px;font-family:var(--fmono);font-size:11px;color:#aaa;margin:0;background:#0a0a12;white-space:pre-wrap;word-break:break-all}
.gen-code::-webkit-scrollbar{width:3px}
.gen-code::-webkit-scrollbar-thumb{background:var(--cyan-d)}

.modal{position:fixed;inset:0;background:rgba(2,10,22,0.88);backdrop-filter:blur(8px);z-index:300;display:flex;align-items:center;justify-content:center}
.modal.hidden{display:none}
.modal-box{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:24px;width:340px;box-shadow:0 0 40px rgba(0,212,255,0.1)}
.modal-title{font-family:var(--fhud);font-size:13px;letter-spacing:0.15em;color:var(--cyan);margin-bottom:16px}
.modal-input{width:100%;background:var(--input-bg);border:1px solid var(--border);border-radius:4px;color:var(--txt);font-family:var(--fmono);font-size:13px;padding:8px 10px;outline:none;margin-bottom:14px}
.modal-input:focus{border-color:var(--cyan)}
.modal-btns{display:flex;gap:8px}
.modal-confirm{flex:1;padding:8px;background:linear-gradient(135deg,var(--cyan-d),#005577);border:1px solid var(--cyan);border-radius:4px;color:#fff;font-family:var(--fhud);font-size:10px;letter-spacing:0.1em;cursor:pointer}
.modal-cancel{flex:1;padding:8px;background:transparent;border:1px solid var(--border);border-radius:4px;color:var(--txt-dim);font-family:var(--fhud);font-size:10px;letter-spacing:0.1em;cursor:pointer}

@media(max-width:900px){.studio-layout{grid-template-columns:180px 1fr 260px}}
@media(max-width:650px){.studio-layout{grid-template-columns:1fr;grid-template-rows:160px 1fr 260px}}
