<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>J.A.R.V.I.S</title>
  <link rel="stylesheet" href="/static/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=JetBrains+Mono:wght@300;400&family=Rajdhani:wght@300;400;500;600&display=swap"
    rel="stylesheet" />
</head>

<body>
  <canvas id="bg-canvas"></canvas>
  <div class="corner tl"></div>
  <div class="corner tr"></div>
  <div class="corner bl"></div>
  <div class="corner br"></div>

  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <div class="logo-wrap">
        <div class="reactor-ring"></div>
        <div class="reactor-core"></div>
      </div>
      <div class="brand">
        <div class="brand-name">J.A.R.V.I.S</div>
        <div class="brand-sub">Just A Rather Very Intelligent System Â· Llama 3.3 70B</div>
      </div>
    </div>
    <div class="header-right">
      <div class="online-badge"><span class="online-dot"></span><span>JARVIS ONLINE</span></div>
      <div class="hud-telemetry">
        <div class="tel-item">CORE TEMP: <span class="cyan">42Â°C</span></div>
        <div class="tel-item">MEMORY: <span class="cyan">12%</span></div>
      </div>
      <div class="hud-clock">
        <div id="clk-time">--:-- --</div>
        <div id="clk-date">Loading...</div>
      </div>
    </div>
  </header>

  <!-- Consolidated Nav Menu -->
  <div class="jarvis-nav-container">
    <div id="menu-items" class="menu-items">
      <div class="menu-section-label">SYSTEMS</div>
      <a href="/studio" class="menu-item">
        <span class="m-icon">ğŸ› </span>
        <span class="m-label">STUDIO</span>
      </a>
      <a href="/studio3d" class="menu-item">
        <span class="m-icon">ğŸ¨</span>
        <span class="m-label">3D STUDIO</span>
      </a>
      <a href="#" id="kb-btn" class="menu-item">
        <span class="m-icon">ğŸ§ </span>
        <span class="m-label">KNOWLEDGE</span>
      </a>

      <div class="menu-section-label">ATMOSPHERE</div>
      <div class="bg-switcher">
        <button class="bg-opt b-black" data-bg="bg-black" title="Pure Black"></button>
        <button class="bg-opt b-grid" data-bg="bg-grid" title="Digital Grid"></button>
        <button class="bg-opt b-nebula" data-bg="bg-nebula" title="Nebula"></button>
        <button class="bg-opt b-matrix" data-bg="bg-matrix" title="Matrix"></button>
        <button class="bg-opt b-cyber" data-bg="bg-cyber" title="Cyberpunk"></button>
      </div>

      <a href="#" id="interrupt-btn" class="menu-item" style="display:none">
        <span class="m-icon">ğŸ›‘</span>
        <span class="m-label">INTERRUPT</span>
      </a>
    </div>
  </div>

  <!-- Camera panel (hidden by default) -->
  <div id="camera-panel" class="camera-panel hidden">
    <div class="camera-header">
      <span class="cam-label">ğŸ“· LIVE CAMERA</span>
      <div class="cam-controls">
        <button id="cam-analyze-btn" class="cam-btn">ğŸ” Analyze Now</button>
        <button id="cam-auto-btn" class="cam-btn">ğŸ”„ Auto</button>
        <button id="cam-close-btn" class="cam-btn cam-close">âœ• Close</button>
      </div>
    </div>
    <div class="camera-body">
      <video id="cam-video" autoplay playsinline muted></video>
      <canvas id="cam-canvas" style="display:none"></canvas>
      <div class="cam-overlay" id="cam-overlay">Click "Analyze Now" or enable Auto</div>
    </div>
  </div>

  <!-- Upload panel (hidden by default) -->
  <div id="upload-panel" class="upload-panel hidden">
    <div class="upload-header">
      <span>ğŸ“ UPLOAD FILE</span>
      <button id="upload-close-btn" class="cam-btn cam-close">âœ•</button>
    </div>
    <div id="drop-zone" class="drop-zone">
      <div class="drop-icon">ğŸ“‚</div>
      <p>Drag & drop or click to upload</p>
      <p class="drop-sub">Images Â· Videos Â· Documents Â· Code files</p>
      <input type="file" id="file-input" accept="image/*,video/*,.pdf,.txt,.md,.py,.js,.html,.css,.json,.csv"
        style="display:none" />
    </div>
    <div class="upload-question">
      <input type="text" id="upload-question" placeholder="What do you want to know about this file?"
        class="upload-q-input" />
      <label class="save-label">
        <input type="checkbox" id="save-file-cb" />
        <span>Save this file permanently</span>
      </label>
    </div>
    <div id="upload-status" class="upload-status"></div>
  </div>

  <!-- Knowledge panel (hidden by default) -->
  <div id="kb-panel" class="kb-panel hidden">
    <div class="kb-header">
      <span>ğŸ§  LEARNED KNOWLEDGE BASE</span>
      <button id="kb-close-btn" class="cam-btn cam-close">âœ•</button>
    </div>
    <div id="kb-list" class="kb-list">Loading...</div>
  </div>

  <!-- Chat area -->
  <main class="chat-area" id="chat-area"></main>

  <!-- Input footer -->
  <footer class="input-footer">
    <div class="input-tools">
      <!-- Menu trigger moved here -->
      <div style="display: flex; gap: 8px; align-items: center;">
        <div id="lightning-trigger" style="font-size: 28px; cursor: pointer;">âš¡</div>
        <div id="menu-trigger" class="menu-trigger" title="System Menu">
          <span class="m-plus">+</span>
        </div>
      </div>
    </div>
    <div class="input-box">
      <span class="prompt-sym">â€º_</span>
      <textarea id="msg-input" placeholder="Ask J.A.R.V.I.S anything... or say 'learn about [topic]'"
        rows="1"></textarea>
    </div>
    <div class="input-btns">
      <button id="voice-btn" class="btn-icon" title="Voice input">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
          <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
          <line x1="12" y1="19" x2="12" y2="23" />
          <line x1="8" y1="23" x2="16" y2="23" />
        </svg>
      </button>
      <button id="send-btn" class="btn-send">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
          <line x1="22" y1="2" x2="11" y2="13" />
          <polygon points="22 2 15 22 11 13 2 9 22 2" />
        </svg>
        SEND
      </button>
    </div>
  </footer>

  <!-- Voice overlay -->
  <div id="voice-overlay" class="voice-overlay hidden">
    <div class="pulse-rings">
      <div class="pr pr1"></div>
      <div class="pr pr2"></div>
      <div class="pr pr3"></div>
      <div class="pr-center">ğŸ¤</div>
    </div>
    <p class="listening-label" id="voice-label">Listeningâ€¦</p>
    <p id="continuous-indicator" class="cont-indicator" style="display:none">ğŸ”„ Continuous Mode ON</p>
    <button id="stop-voice-btn" class="stop-voice">âœ• Stop</button>
  </div>

  <script src="/static/script.js"></script>
</body>

</html>