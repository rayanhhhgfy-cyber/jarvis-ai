<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>J.A.R.V.I.S ‚Äî Studio</title>
  <link rel="stylesheet" href="/static/style.css"/>
  <link rel="stylesheet" href="/static/studio.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=JetBrains+Mono:wght@300;400&family=Rajdhani:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
</head>
<body>
  <canvas id="bg-canvas"></canvas>
  <div class="corner tl"></div><div class="corner tr"></div>
  <div class="corner bl"></div><div class="corner br"></div>

  <header class="header">
    <div class="header-left">
      <div class="logo-wrap">
        <div class="logo-letter">J</div>
        <svg class="logo-ring-svg" viewBox="0 0 60 60">
          <circle cx="30" cy="30" r="26" fill="none" stroke="var(--cyan)" stroke-width="1" stroke-dasharray="5 4" opacity="0.4"/>
          <circle class="ring-dot" cx="30" cy="4" r="3" fill="var(--cyan)"/>
        </svg>
      </div>
      <div class="brand">
        <div class="brand-name">J.A.R.V.I.S ‚Äî PROJECT STUDIO</div>
        <div class="brand-sub">AI-Powered Code Editor ¬∑ Llama 3.3 70B</div>
      </div>
    </div>
    <div class="header-right">
      <a href="/" class="nav-btn">‚Üê Chat</a>
      <div class="online-badge"><span class="online-dot"></span><span>STUDIO</span></div>
      <div class="hud-clock">
        <div id="clk-time">--:-- --</div>
        <div id="clk-date">Loading...</div>
      </div>
    </div>
  </header>

  <div class="studio-layout">
    <!-- File Explorer -->
    <aside class="file-panel">
      <div class="panel-header">
        <span>EXPLORER</span>
        <div class="panel-actions">
          <button class="icon-action" id="new-file-btn" title="New File">Ôºã</button>
          <button class="icon-action" id="new-folder-btn" title="New Folder">üìÅ</button>
          <button class="icon-action" id="refresh-btn" title="Refresh">‚Ü∫</button>
        </div>
      </div>
      <div class="file-tree" id="file-tree">
        <div class="tree-empty">No files yet.<br/>Create one or ask JARVIS.</div>
      </div>
    </aside>

    <!-- Monaco Editor -->
    <main class="editor-panel">
      <div class="editor-toolbar">
        <span id="current-filename" class="current-file">No file open</span>
        <div class="toolbar-actions">
          <button class="tool-btn" id="save-btn">üíæ Save (Ctrl+S)</button>
          <button class="tool-btn" id="explain-btn">üîç Explain</button>
          <button class="tool-btn" id="download-btn">‚¨á Download</button>
        </div>
      </div>
      <div id="monaco-editor" class="monaco-container"></div>
    </main>

    <!-- AI Panel -->
    <aside class="ai-panel">
      <div class="panel-header">
        <span>AI ASSISTANT</span>
        <span class="ai-model-tag">Llama 3.3 70B</span>
      </div>
      <div class="ai-output" id="ai-output">
        <div class="ai-welcome">
          <p>üëã Hi Rayan! Ask me to generate or edit code.</p>
          <p>Examples:</p>
          <ul>
            <li>"Create a Flask login system"</li>
            <li>"Build a snake game in JS"</li>
            <li>"Add dark mode to this file"</li>
            <li>"Fix the bug in my code"</li>
          </ul>
          <p style="margin-top:10px;color:var(--cyan);font-size:12px;">Tip: Ctrl+Enter to generate</p>
        </div>
      </div>
      <div class="ai-input-area">
        <label class="toggle-label">
          <input type="checkbox" id="use-context" checked/>
          <span>Include current file as context</span>
        </label>
        <textarea id="ai-prompt" class="ai-prompt-input"
          placeholder="Describe what you want..." rows="3"></textarea>
        <div class="ai-btn-row">
          <button id="generate-btn" class="btn-generate">‚ö° Generate</button>
          <button id="apply-btn" class="btn-apply" disabled>‚úÖ Apply</button>
        </div>
      </div>
      <div class="gen-preview" id="gen-preview" style="display:none">
        <div class="gen-preview-header">
          <span>Preview</span>
          <button id="close-preview" class="close-btn">‚úï</button>
        </div>
        <pre id="gen-code-display" class="gen-code"></pre>
      </div>
    </aside>
  </div>

  <!-- New file modal -->
  <div id="new-file-modal" class="modal hidden">
    <div class="modal-box">
      <div class="modal-title" id="modal-title">Create New File</div>
      <input type="text" id="new-file-name" class="modal-input" placeholder="e.g. app.py"/>
      <div class="modal-btns">
        <button id="create-confirm" class="modal-confirm">Create</button>
        <button id="create-cancel" class="modal-cancel">Cancel</button>
      </div>
    </div>
  </div>

  <script src="/static/studio.js"></script>
</body>
</html>
